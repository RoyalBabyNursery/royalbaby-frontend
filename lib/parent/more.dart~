import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:royal/theme/colors.dart';
import 'package:royal/theme/fonts.dart';
import 'package:royal/widget/container.dart';

class More extends StatefulWidget {
  const More({super.key});

  @override
  State<More> createState() => _MoreState();
}

class _MoreState extends State<More> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: NewColors.alwaysWhite,
      body: SingleChildScrollView(
        child: Column(
          children: [
            Container(
              height: MediaQuery.sizeOf(context).height * 0.28,
              width: MediaQuery.sizeOf(context).width,
              color: NewColors.grayBox,
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                crossAxisAlignment: CrossAxisAlignment.center,
                children: [
                  Container(
                    height: MediaQuery.sizeOf(context).width * 0.18,
                    width: MediaQuery.sizeOf(context).width * 0.18,
                    decoration: BoxDecoration(
                        borderRadius: BorderRadius.circular(12),
                        color: NewColors.bg),
                    child: Image.asset('assets/images/user.png'),
                  ),
                  SizedBox(
                    height: 8,
                  ),
                  InkWell(
                    onTap: () {
                      showModalBottomSheet(
                        context: context,
                        isScrollControlled: true,
                        shape: const RoundedRectangleBorder(
                          borderRadius: BorderRadius.vertical(top: Radius.circular(24)),
                        ),
                        builder: (context) => const SwitchStudentSheet(),
                      );
                    },
                    child: Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          'احمد ابراهيم عبدالله',
                          style: AppFonts.headingH5(color: NewColors.heading),
                        ),
                        const SizedBox(width: 8),
                        Image.asset('assets/images/Dropdown Icon3.png'),
                      ],
                    ),
                  ),

                  SizedBox(
                    height: 8,
                  ),
                  Text(
                    'G4',
                    style: AppFonts.body2(color: NewColors.caption),
                  ),
                ],
              ),
            ),
            Padding(
              padding: const EdgeInsets.all(12.0),
              child: Column(
                children: [
                  HelpForMore(
                    title: 'الملف الشخصي',
                    note: 'عرض وتحديثات معلومات حسابك',
                    image: 'assets/images/User Icon.png',
                  ),
                  Divider(
                    height: 1,
                    color: LineColors.line,
                  ),
                  HelpForMore(
                    title: 'اللائحه',
                    note: 'استعراض القواعد والإرشادات الخاصة بالحضانة',
                    image: 'assets/images/User Icon2.png',
                  ),
                  Divider(
                    height: 1,
                    color: LineColors.line,
                  ),
                  HelpForMore(
                      title: 'الاعدادات',
                      note: 'تخصيص تفضيلات التطبيق',
                      image: 'assets/images/setting-2.png'),
                  Divider(
                    height: 1,
                    color: LineColors.line,
                  ),
                  HelpForMore(
                      title: 'تواصل معنا',
                      note: 'تواصل مع فريق الدعم والمساعدة',
                      image: 'assets/images/headphone.png'),
                  Divider(
                    height: 1,
                    color: LineColors.line,
                  ),
                  HelpForMore(
                      title: 'الاسئله الشائعة',
                      note: 'إجابات على أبرز الاستفسارات',
                      image: 'assets/images/message-question.png'),
                  Divider(
                    height: 1,
                    color: LineColors.line,
                  ),
                  HelpForMore(
                      title: 'عن التطبيق',
                      note: 'تعرف على مميزات التطبيق وحقوق الاستخدام',
                      image: 'assets/images/information.png'),
                  Divider(
                    height: 1,
                    color: LineColors.line,
                  ),
                  HelpForMore(
                      title: 'تسجيل خروج',
                      note: 'إنهاء الجلسة الحالية بأمان',
                      image: 'assets/images/logout.png')
                ],
              ),
            )
          ],
        ),
      ),
    );
  }
}

class SwitchStudentSheet extends StatelessWidget {
  const SwitchStudentSheet({super.key});

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: TextDirection.rtl,
      child: Container(
        decoration: const BoxDecoration(
          color: NewColors.alwaysWhite,
          borderRadius: BorderRadius.vertical(top: Radius.circular(24)),
        ),
        child: Padding(
          padding: const EdgeInsets.fromLTRB(16, 20, 16, 30),
          child: Column(
            mainAxisSize: MainAxisSize.min,
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Row(
                children: [
                  InkWell(
                    onTap: () => Navigator.pop(context),
                    child: Image.asset(
                      'assets/images/Close Button Container.png',
                    ),
                  ),
                  const SizedBox(width: 12),
                  Text(
                    'تبديل حساب الطالب',
                    style: AppFonts.supHeading2(color: NewColors.heading),
                  ),
                ],
              ),
              const SizedBox(height: 20),
              ListTile(
                leading: Container(
                  height: MediaQuery.sizeOf(context).width*0.116,
                  width: MediaQuery.sizeOf(context).width*0.116,
                  decoration: BoxDecoration(
                    color: NewColors.lightBG,
                    borderRadius: BorderRadius.circular(12),
                  ),
                  child: Image.asset('assets/images/user.png'),
                ),
                title: Text(
                  'احمد ابراهيم عبدالله (G4)',
                  style: AppFonts.body3(color: NewColors.supHeading),
                ),
                subtitle: Text(
                  'حضانة رويال بيبي',
                  style: AppFonts.body3(color: NewColors.body),
                ),
                trailing: Image.asset('assets/images/Student Account.png'),
                onTap: () {
                  Navigator.pop(context);
                },
              ),
              const Divider(height: 1, color: LineColors.line),
              ListTile(
                leading: Container(
                  height: 40,
                  width: 40,
                  decoration: BoxDecoration(
                    color: NewColors.grayBox,
                    borderRadius: BorderRadius.circular(8),
                  ),
                  child: Image.asset('assets/images/user.png'),
                ),
                title: Text(
                  'مريم ابراهيم عبدالله (G2)',
                  style: AppFonts.body3(color: NewColors.supHeading),
                ),
                subtitle: Text(
                  'حضانة رويال بيبي',
                  style: AppFonts.body3(color: NewColors.body),
                ),
                onTap: () {
                  Navigator.pop(context);
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}


